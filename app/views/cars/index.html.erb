<!-- Mes cartes -->
<h1 class="text-center title-index-padding">Find your <strong id="title-index">Sharer</strong> and a <strong id="title-index">comfy</strong> car</h1>

<div class="container-fluid">

<!-- Mes cartes -->
          <div class="container">
            <div class="row align-items-start">
              <div class="col-6 ">

                <% @cars.each do |car| %>
                  <%= link_to car_path(car), target: "_blank" do %>
                    <div class="card-trip">
                      <img src=" <%= car.photo %> "/>
                      <div class="card-trip-infos">
                        <div>
                          <h2><%= car.title %></h2>
                          <p> <%= car.content %></p>
                        </div>
                        <h2 class="card-trip-pricing"><%= car.price %> â‚¬</h2>
                        <img src="https://kitt.lewagon.com/placeholder/users/krokrob" class="card-trip-user avatar-bordered" />
                      </div>
                    </div>
                  <% end %>
                <% end %>

              </div>
            </div>
          </div>

  <div class="col-sm-5">
    <div class="cars-map-wrapper">
      <div id="cars-map" style="width: 100%; height: 400px;"></div>
    </div>
  </div>
</div>

<% content_for(:after_js) do %>
  <%= javascript_tag do %>
    $(document).ready(function() {
      var handler = Gmaps.build('Google');
      handler.buildMap({
        provider: {
          scrollwheel: false,
          zoomControl: false
        },
        internal: { id: 'cars-map' } }, function() {
        markers = handler.addMarkers(<%= raw @hash.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
        if (markers.length == 0) {
          handler.getMap().setZoom(2);
        } else if (markers.length == 1) {
          handler.getMap().setZoom(14);
        }
      });
    });

  <% end %>
<% end %>
